cmake_minimum_required(VERSION 3.14)
project(XSmall-HMI-SCADA_input_output)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Включаем модуль FetchContent
include(FetchContent)

# Скачиваем и собираем SFML из исходников
FetchContent_Declare(
    sfml
    GIT_REPOSITORY https://github.com/SFML/SFML.git
    GIT_TAG 2.6.1
    GIT_SHALLOW TRUE
)

# Опционально: отключаем модули, которые не нужны (ускоряет сборку)
set(SFML_BUILD_AUDIO OFF CACHE BOOL "" FORCE)
set(SFML_BUILD_NETWORK OFF CACHE BOOL "" FORCE)
set(SFML_BUILD_EXAMPLES OFF CACHE BOOL "" FORCE)
set(SFML_BUILD_DOC OFF CACHE BOOL "" FORCE)

# Включаем статическую сборку (чтобы не нужны были DLL)
set(BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)

# Загружаем SFML
FetchContent_MakeAvailable(sfml)

# Создаем наш исполняемый файл
add_executable(main main.cpp)

# Подключаем SFML (используем цели CMake)
target_link_libraries(main PRIVATE
    sfml-graphics
    sfml-window
    sfml-system
)

# Для статической линковки на Windows
if(WIN32)
    # Не нужно SFML_STATIC при использовании FetchContent
    # Автоматически подключаются системные библиотеки
    
    # Для отладки: выводим информацию о библиотеках
    message(STATUS "Using SFML from FetchContent")
    message(STATUS "SFML include dir: ${sfml_SOURCE_DIR}/include")
endif()